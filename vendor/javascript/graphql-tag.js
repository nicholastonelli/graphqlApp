// graphql-tag@2.12.6 downloaded from https://ga.jspm.io/npm:graphql-tag@2.12.6/lib/index.js

import{__assign as e}from"tslib";import{parse as a}from"graphql";var r=new Map;var n=new Map;var t=true;var i=false;function normalize(e){return e.replace(/[\s,]+/g," ").trim()}function cacheKeyFromLoc(e){return normalize(e.source.body.substring(e.start,e.end))}function processFragments(a){var r=new Set;var i=[];a.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var a=e.name.value;var l=cacheKeyFromLoc(e.loc);var s=n.get(a);s&&!s.has(l)?t&&console.warn("Warning: fragment with name "+a+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):s||n.set(a,s=new Set);s.add(l);if(!r.has(l)){r.add(l);i.push(e)}}else i.push(e)}));return e(e({},a),{definitions:i})}function stripLoc(e){var a=new Set(e.definitions);a.forEach((function(e){e.loc&&delete e.loc;Object.keys(e).forEach((function(r){var n=e[r];n&&"object"===typeof n&&a.add(n)}))}));var r=e.loc;if(r){delete r.startToken;delete r.endToken}return e}function parseDocument(e){var n=normalize(e);if(!r.has(n)){var t=a(e,{experimentalFragmentVariables:i,allowLegacyFragmentVariables:i});if(!t||"Document"!==t.kind)throw new Error("Not a valid GraphQL document.");r.set(n,stripLoc(processFragments(t)))}return r.get(n)}function gql(e){var a=[];for(var r=1;r<arguments.length;r++)a[r-1]=arguments[r];"string"===typeof e&&(e=[e]);var n=e[0];a.forEach((function(a,r){a&&"Document"===a.kind?n+=a.loc.source.body:n+=a;n+=e[r+1]}));return parseDocument(n)}function resetCaches(){r.clear();n.clear()}function disableFragmentWarnings(){t=false}function enableExperimentalFragmentVariables(){i=true}function disableExperimentalFragmentVariables(){i=false}var l={gql:gql,resetCaches:resetCaches,disableFragmentWarnings:disableFragmentWarnings,enableExperimentalFragmentVariables:enableExperimentalFragmentVariables,disableExperimentalFragmentVariables:disableExperimentalFragmentVariables};(function(e){e.gql=l.gql,e.resetCaches=l.resetCaches,e.disableFragmentWarnings=l.disableFragmentWarnings,e.enableExperimentalFragmentVariables=l.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=l.disableExperimentalFragmentVariables})(gql||(gql={}));gql.default=gql;var s=gql;export{s as default,disableExperimentalFragmentVariables,disableFragmentWarnings,enableExperimentalFragmentVariables,gql,resetCaches};

