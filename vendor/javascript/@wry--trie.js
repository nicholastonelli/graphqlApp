// @wry/trie@0.5.0 downloaded from https://ga.jspm.io/npm:@wry/trie@0.5.0/lib/index.js

const defaultMakeData=()=>Object.create(null);const{forEach:e,slice:t}=Array.prototype;const{hasOwnProperty:r}=Object.prototype;class Trie{constructor(e=true,t=defaultMakeData){this.weakness=e;this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(a){let s=this;e.call(a,(e=>s=s.getChildTrie(e)));return r.call(s,"data")?s.data:s.data=this.makeData(t.call(a))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,a=e.length;t&&r<a;++r){const a=t.mapFor(e[r],false);t=a&&a.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let r;if(e.length){const a=e[0];const s=this.mapFor(a,false);const o=s&&s.get(a);if(o){r=o.removeArray(t.call(e,1));o.data||o.weak||o.strong&&o.strong.size||s.delete(a)}}else{r=this.data;delete this.data}return r}getChildTrie(e){const t=this.mapFor(e,true);let r=t.get(e);r||t.set(e,r=new Trie(this.weakness,this.makeData));return r}mapFor(e,t){return this.weakness&&isObjRef(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function isObjRef(e){switch(typeof e){case"object":if(e===null)break;case"function":return true}return false}export{Trie};

